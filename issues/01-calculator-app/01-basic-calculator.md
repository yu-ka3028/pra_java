# 基本電卓機能の実装

## 目的

Java の基本文法を習得しながら、四則演算、累乗、平方根ができるコンソールベースの電卓アプリケーションを開発します。

## ゴール

- 四則演算（加算、減算、乗算、除算）が正常に動作する
- 累乗計算（x^y）が正常に動作する
- 平方根計算（√x）が正常に動作する
- コンソールから数値と演算子を入力できる
- 計算結果を適切に表示できる
- 基本的な入力値チェックができる

## 事前準備（調査）

### 1. Java 基本文法の確認

- [x] 変数の宣言と初期化
- [x] メソッドの定義と呼び出し
- [x] 条件分岐（if-else 文）
- [x] ループ処理（for 文、while 文）
- [x] 配列の使用方法

### 2. コンソール入出力の調査

- [x] `Scanner`クラスの使用方法
- [x] `System.out.println()`の使用方法
- [x] 文字列と数値の変換方法

### 3. 計算精度の調査

- [x] `double`型と`BigDecimal`の違い
- [ ] 浮動小数点数の精度問題

### 4. Java 数学ライブラリの調査

- [x] `Math`クラスの使用方法
- [x] `Math.pow()`メソッドの使用方法
- [x] `Math.sqrt()`メソッドの使用方法
- [ ] 精度管理の方法

## 実装のタスク分解

branch: console_calc

### Phase 1: 基本構造の作成

- [x] `Calculator`クラスの作成
- [x] メインメソッドの実装
- [x] 基本的な計算メソッドの定義

### Phase 2: 四則演算の実装

- [x] 加算メソッドの実装
- [x] 減算メソッドの実装
- [x] 乗算メソッドの実装
- [x] 除算メソッドの実装

### Phase 3: コンソール入出力の実装

- [x] `Scanner`オブジェクトの作成
- [x] 数値入力の処理
- [x] 演算子入力の処理
- [x] 結果表示の実装

### Phase 4: 四則演算の混合計算の実装

- [x] マイナス値を含む計算
- [x] エラーメッセージの表示

## Phase 5: 小数点のある計算の実装

- [x] 小数点のある要素の計算

## Phase 6: 累乗・平方根機能の実装

- [x] 累乗計算機能の実装
  - `power()`メソッドの実装（Math.pow()を使用）
  - 累乗計算の精度管理
  - 負の数の累乗計算
- [x] 平方根計算機能の実装
  - `squareRoot()`メソッドの実装（Math.sqrt()を使用）
  - 負の数の平方根エラーハンドリング
  - 小数点の平方根計算

## 動作確認チェックリスト

### 基本機能テスト

- [x] 加算（5 + 3 = 8）が正常に動作する
- [x] 加算（-1 + 1 = 0）が正常に動作する
- [x] 加算（1.5 + 1.2 = 2.7）が正常に動作する
- [x] 減算（10 - 4 = 6）が正常に動作する
- [x] 減算（-10.2 - 4.1 = -14.3）が正常に動作する
- [x] 乗算（6 * 7 = 42）が正常に動作する
- [x] 乗算（6.2 * 2 = 12.4）が正常に動作する
- [x] 除算（15 / 3 = 5）が正常に動作する
- [x] 除算（5 / (-2) = -10）が正常に動作する

### 累乗・平方根機能テスト

- [x] 累乗計算（2^3 = 8）が正常に動作する
- [x] 累乗計算（2^0.5 = 1.414...）が正常に動作する
- [x] 平方根計算（√16 = 4）が正常に動作する
- [x] 平方根計算（√2 = 1.414...）が正常に動作する
- [x] 負の数の平方根でエラーメッセージが表示される

### エッジケーステスト

- [x] 大きな数値の計算が正常に動作する
- [x] 小数の計算が正常に動作する
- [x] 負の数の計算が正常に動作する
- [x] ゼロの計算が正常に動作する

### 入力値チェックテスト

- [x] 不正な数値入力時にエラーメッセージが表示される
- [x] 不正な演算子入力時にエラーメッセージが表示される
- [x] プログラムが異常終了しない

### ユーザビリティテスト

- [x] 入力方法が分かりやすい
- [x] エラーメッセージが理解しやすい
- [x] 計算結果が正確に表示される

## その他備考
- 実装時期になったところ
  - 有効数字は小さい値に合わせて答えを返す
  - 入力桁数を制限（10桁など）

### 注意事項

- 薬剤計算では精度が重要なので、必要に応じて`BigDecimal`を使用する
- 家族向けシステムとして、使いやすさを重視する
- 将来的な機能拡張を考慮した設計にする

### 設計検討事項

- 個別入力方式 vs 式入力方式の比較検討
- 基本的な四則演算の確実な動作
- エラーハンドリングの実装
- 将来的な機能拡張の基盤作り

### 参考資料

- [Java Scanner Class](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Scanner.html)
- [Java Math Class](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html)
- [BigDecimal for Precise Calculations](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html)
- [Math.pow() Method](<https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#pow(double,double)>)
- [Math.sqrt() Method](<https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#sqrt(double)>)

### 次のステップ

- メモリ機能の実装（02-advanced-operations.md）
- エラーハンドリングの強化
- 単体テストの作成
